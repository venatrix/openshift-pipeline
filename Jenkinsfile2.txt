node('') {
stage 'build'
openshiftBuild(buildConfig: 'myphp', showBuildLogs: 'true')
stage 'deploy'
openshiftDeploy(deploymentConfig: 'myphp')
openshiftScale(deploymentConfig: 'myphp',replicaCount: '2')    
stage 'buildInDevelopment'
openshiftBuild(namespace: 'dev', buildConfig: 'myapp', showBuildLogs: 'true')
stage 'deployInDevelopment'
openshiftDeploy(namespace: 'dev', deploymentConfig: 'myapp')
openshiftScale(namespace: 'dev', deploymentConfig: 'myapp',replicaCount: '2')
stage 'deployInStaging'
openshiftTag(namespace: 'dev', sourceStream: 'myapp',  sourceTag: 'latest', destinationStream: 'myapp', destinationTag: 'promoteToQA')
openshiftDeploy(namespace: 'stage', deploymentConfig: 'myapp', )
openshiftScale(namespace: 'stage', deploymentConfig: 'myapp',replicaCount: '3')
}
